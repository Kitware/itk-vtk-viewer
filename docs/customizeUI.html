<!DOCTYPE html>
<html lang="en">
<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8">
  <title>User Interface (UI) Customization | itk-vtk-viewer</title>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Canonical links -->
  <link rel="canonical" href="https://kitware.github.io/itk-vtk-viewer/docs/customizeUI.html">
  <!-- Alternative links -->
  
    
      <link rel="alternative" hreflang="en" href="https://kitware.github.io/itk-vtk-viewer/docs/customizeUI.html">
    
  
  <!-- Icon -->
  <link rel="apple-touch-icon" sizes="57x57" href="/itk-vtk-viewer/icon/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/itk-vtk-viewer/icon/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/itk-vtk-viewer/icon/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/itk-vtk-viewer/icon/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/itk-vtk-viewer/icon/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/itk-vtk-viewer/icon/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/itk-vtk-viewer/icon/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/itk-vtk-viewer/icon/apple-touch-icon-152x152.png">
  <link rel="icon" type="image/png" href="/itk-vtk-viewer/icon/favicon-196x196.png" sizes="196x196">
  <link rel="icon" type="image/png" href="/itk-vtk-viewer/icon/favicon-160x160.png" sizes="160x160">
  <link rel="icon" type="image/png" href="/itk-vtk-viewer/icon/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/itk-vtk-viewer/icon/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="/itk-vtk-viewer/icon/favicon-32x32.png" sizes="32x32">
  <meta name="msapplication-TileColor" content="#2f83cd">
  <meta name="msapplication-TileImage" content="/itk-vtk-viewer/icon/mstile-144x144.png">
  <!-- CSS -->
  <!-- build:css build/css/navy.css -->
  
<link rel="stylesheet" href="/itk-vtk-viewer/css/navy.css">

  <!-- endbuild -->
  <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css">
  <!-- RSS -->
  <link rel="alternate" href="/itk-vtk-viewer/atom.xml" title="itk-vtk-viewer" type="application/atom+xml">
  <!-- Open Graph -->
  <meta name="description" content="The viewer’s user interface (UI) is completely customizable. An existing viewer user interface can be tweaked, or a new user interface can be built from scratch. Use vanilla HTML&#x2F;CSS&#x2F;JavaScript or you">
<meta property="og:type" content="website">
<meta property="og:title" content="User Interface (UI) Customization">
<meta property="og:url" content="https://kitware.github.io/itk-vtk-viewer/docs/customizeUI.html">
<meta property="og:site_name" content="itk-vtk-viewer">
<meta property="og:description" content="The viewer’s user interface (UI) is completely customizable. An existing viewer user interface can be tweaked, or a new user interface can be built from scratch. Use vanilla HTML&#x2F;CSS&#x2F;JavaScript or you">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://kitware.github.io/itk-vtk-viewer/docs/referenceUITemplateGitHub.png">
<meta property="og:image" content="https://kitware.github.io/itk-vtk-viewer/docs/screenshotButton.png">
<meta property="og:image" content="https://kitware.github.io/itk-vtk-viewer/docs/screenshotButtonGreen.png">
<meta property="article:published_time" content="2022-10-18T00:47:35.647Z">
<meta property="article:modified_time" content="2022-10-18T00:47:35.647Z">
<meta property="article:author" content="Kitware Inc.">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://kitware.github.io/itk-vtk-viewer/docs/referenceUITemplateGitHub.png">
  <!-- Google Analytics -->
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-90338862-7', 'auto');
  ga('send', 'pageview');
</script>



<meta name="generator" content="Hexo 5.4.2"></head>

<body>
  <div id="container">
    <header id="header" class="wrapper">
  <div id="header-inner" class="inner">
    <h1 id="logo-wrap">
      <a href="/itk-vtk-viewer/" id="logo">itk-vtk-viewer</a>
    </h1>
    <nav id="main-nav">
      <a href="/itk-vtk-viewer/docs/" class="main-nav-link">Documentation</a><a href="/itk-vtk-viewer/api/" class="main-nav-link">API</a><a href="/itk-vtk-viewer/config/" class="main-nav-link">Config</a><a href="/itk-vtk-viewer/app/" class="main-nav-link">Application</a>
      <a target="_blank" rel="noopener" href="https://github.com/kitware/itk-vtk-viewer" class="main-nav-link"><i class="fa fa-github-alt"></i></a>
      <div id="search-input-wrap">
        <div id="search-input-icon">
          <i class="fa fa-search"></i>
        </div>
        <input type="search" id="search-input" placeholder="Search...">
      </div>
    </nav>
    <a id="mobile-nav-toggle">
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
    </a>
  </div>
</header>

    <div id="content-wrap">
  <div id="content" class="wrapper">
    <div id="content-inner">
      <article class="article-container" itemscope itemtype="http://schema.org/Article">
        <div class="article-inner">
          <div class="article">
            <div class="inner">
              <header class="article-header">
                <h1 class="article-title" itemprop="name">User Interface (UI) Customization</h1>
              </header>
              <div class="article-content" itemprop="articleBody">
                <p>The viewer’s user interface (UI) is completely customizable. An existing viewer user interface can be tweaked, or a new user interface can be built from scratch. Use vanilla HTML/CSS/JavaScript or your favorite UI framework, such as React.js or Vue.js.</p>
<p>The user interface is specified on viewer creation with a JavaScript object or an object that specifies an <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules">ES Module</a>. The UI object should contain functions that implement <strong>actions</strong> called as UI <a target="_blank" rel="noopener" href="https://xstate.js.org/docs/">state machines</a> respond to events. Nested objects provide actions for child state machines. A few example actions are <code>toggleDarkMode</code> or <code>toggleUICollapsed</code>.</p>
<p>Each <a target="_blank" rel="noopener" href="https://xstate.js.org/docs/about/glossary.html#action">action function</a> is expected to accept two arguments: <code>context</code> and <code>event</code>.</p>
<p>The <code>context</code> is the current state machine context. A <code>context</code> object is comprised of the context generated by the <a href="../config/">viewer configuration</a> and additional objects generated by the UI or renderer. For example, the <code>createInterface</code> action may add a <code>div</code> property to the <code>context</code> for the UI that other UI actions may reference later.</p>
<p>The <code>event</code> argument is the current event object that triggered the action. An <code>event</code> object contains the event name, an upper case string by convention. Optionally, the <code>event</code> may contain a payload in the <code>data</code> property. In addition to responding to events, a UI implementation will trigger events from user input and pass those events to the state machine by calling <code>context.service.send(&lt;triggeredEvent&gt;)</code>. For example,</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">collapseUIButton.addEventListener(&#x27;click&#x27;, () =&gt; &#123; context.service.send(&#x27;TOGGLE_UI_COLLAPSED&#x27;))</span><br></pre></td></tr></table></figure>

<h2 id="UI-options-architecture" class="article-heading"><a href="#UI-options-architecture" class="headerlink" title="UI options architecture"></a>UI options architecture<a class="article-anchor" href="#UI-options-architecture" aria-hidden="true"></a></h2><p><strong>Warning</strong>: the viewer machine’s architecture is experimental and it is subject to change without modification to the major version of the package. We mean it!</p>
<p>Available actions can be observed in the <a target="_blank" rel="noopener" href="https://github.com/Kitware/itk-vtk-viewer/blob/master/src/UI/reference-ui/src/referenceUIMachineOptions.js">Reference UI Machine Options</a>. If an action is not implemented, it is a no-op. Nested options objects correspond to the nested state machines. They are:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/Kitware/itk-vtk-viewer/blob/master/src/UI/Reference/Main/mainUIMachineOptions.js"><code>main</code></a>: UI components impacting the entire viewer’s state. For example, the UI to toggle fullscreen mode or change the viewer’s background color.</li>
<li><a target="_blank" rel="noopener" href="https://github.com/Kitware/itk-vtk-viewer/blob/master/src/UI/Reference/Layers/layersUIMachineOptions.js"><code>layers</code></a>: UI components related to dataset layers. For example, the UI to select a layer or toggle its visibility.</li>
<li><a target="_blank" rel="noopener" href="https://github.com/Kitware/itk-vtk-viewer/blob/master/src/UI/Reference/Widgets/widgetsUIMachineOptions.js"><code>widgets</code></a>: UI components for interactive widget parameters. For example, display the current distance measured by a distance widget.</li>
<li><a target="_blank" rel="noopener" href="https://github.com/Kitware/itk-vtk-viewer/blob/master/src/UI/Reference/Images/imagesUIMachineOptions.js"><code>images</code></a>: UI components related to the currently selected image layer. For example, the current color map used.</li>
<li><code>geometries</code> (todo): UI components related to the currently selected geometry layer. For example, the current geometry opacity.</li>
<li><code>pointSets</code> (todo): UI components related to the currently selected point set layer. For example, the current point set opacity.</li>
</ul>
<h2 id="Example-Main-UI-with-only-a-screenshot-button" class="article-heading"><a href="#Example-Main-UI-with-only-a-screenshot-button" class="headerlink" title="Example: Main UI with only a screenshot button"></a>Example: Main UI with only a screenshot button<a class="article-anchor" href="#Example-Main-UI-with-only-a-screenshot-button" aria-hidden="true"></a></h2><p>This example demonstrates how to customize the <code>reference</code> UI so the <code>main</code> interface only presents a screenshot button.</p>
<h3 id="Create-repository" class="article-heading"><a href="#Create-repository" class="headerlink" title="Create repository"></a>Create repository<a class="article-anchor" href="#Create-repository" aria-hidden="true"></a></h3><p>Let’s create a repository for our interface.</p>
<p>Either use the <em>Use this template</em> button on the <a target="_blank" rel="noopener" href="https://github.com/InsightSoftwareConsortium/itk-viewer-reference-ui-template">itk-viewer-reference-ui-template GitHub repository</a>:</p>
<p><img src="./referenceUITemplateGitHub.png" alt="itk-viewer-reference-ui-template button"></p>
<p>or use the template repository on the command line:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npx degit InsightSoftwareConsortium/itk-viewer-reference-ui-template my-viewer-ui</span><br></pre></td></tr></table></figure>

<h3 id="Edit-interface" class="article-heading"><a href="#Edit-interface" class="headerlink" title="Edit interface"></a>Edit interface<a class="article-anchor" href="#Edit-interface" aria-hidden="true"></a></h3><p>To create our interface, first install the Node.js packages:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd my-viewer-ui</span><br><span class="line">npm ci</span><br></pre></td></tr></table></figure>

<p>Then start the development server:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm run dev</span><br></pre></td></tr></table></figure>

<p>And visit <em><a target="_blank" rel="noopener" href="http://localhost:3000/">http://localhost:3000</a></em> in your web browser. The template has customized the viewer’s <a target="_blank" rel="noopener" href="https://www.npmjs.com/package/itk-viewer-reference-ui">Reference UI</a> to only present a screenshot button in the viewer’s main interface. The main interface is customized with the <code>createMainInterface</code> action.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import referenceUIMachineOptions from &#x27;itk-viewer-reference-ui/src/referenceUIMachineOptions.js&#x27;</span><br><span class="line">import style from &#x27;itk-viewer-reference-ui/src/ItkVtkViewer.module.css&#x27;</span><br><span class="line">import createScreenshotButton from &#x27;itk-viewer-reference-ui/src/Main/createScreenshotButton.js&#x27;</span><br><span class="line"></span><br><span class="line">function modifiedCreateMainInterface(context) &#123;</span><br><span class="line">  const mainUIGroup = document.createElement(&#x27;div&#x27;)</span><br><span class="line">  mainUIGroup.setAttribute(&#x27;class&#x27;, style.uiGroup)</span><br><span class="line">  context.uiGroups.set(&#x27;main&#x27;, mainUIGroup)</span><br><span class="line"></span><br><span class="line">  const mainUIRow1 = document.createElement(&#x27;div&#x27;)</span><br><span class="line">  mainUIRow1.setAttribute(&#x27;class&#x27;, style.mainUIRow)</span><br><span class="line">  mainUIGroup.appendChild(mainUIRow1)</span><br><span class="line"></span><br><span class="line">  createScreenshotButton(context, mainUIRow1)</span><br><span class="line"></span><br><span class="line">  context.uiContainer.appendChild(mainUIGroup)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="./screenshotButton.png" alt="screenshot button"></p>
<p>We re-use the rest of the user interface machine actions:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const uiMachineOptions = &#123; ...referenceUIMachineOptions &#125;</span><br><span class="line"></span><br><span class="line">const uiMainActions = &#123; ...uiMachineOptions.main.actions &#125;</span><br><span class="line">uiMainActions.createMainInterface = modifiedCreateMainInterface</span><br><span class="line"></span><br><span class="line">const uiMain = &#123; ...uiMachineOptions.main &#125;</span><br><span class="line">uiMain.actions = uiMainActions</span><br><span class="line">uiMachineOptions.main = uiMain</span><br></pre></td></tr></table></figure>

<p>And use the <code>uiMachineOptions</code> as the default module export:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export default uiMachineOptions</span><br></pre></td></tr></table></figure>

<p>Let’s make the background of the main user interface green by editing <em>main.js</em>:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[...]</span><br><span class="line">createScreenshotButton(context, mainUIRow1)</span><br><span class="line"></span><br><span class="line">// Add this line</span><br><span class="line">mainUIGroup.style.backgroundColor = &quot;green&quot;</span><br><span class="line"></span><br><span class="line">context.uiContainer.appendChild(mainUIGroup)</span><br><span class="line">[...]</span><br></pre></td></tr></table></figure>

<p>After saving <em>main.js</em>, the page will reload with our change applied:</p>
<p><img src="./screenshotButtonGreen.png" alt="screenshot button green"></p>
<h3 id="Publish-the-UI-module" class="article-heading"><a href="#Publish-the-UI-module" class="headerlink" title="Publish the UI module"></a>Publish the UI module<a class="article-anchor" href="#Publish-the-UI-module" aria-hidden="true"></a></h3><p>Exit the development server with <em>Ctrl+C</em> if still open, then build a production version of the user interface module:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure>

<p>This builds the module <code>dist/referenceUIMachineOptions.js.es.js</code>.</p>
<p>We can publish our interface to <a target="_blank" rel="noopener" href="https://www.npmjs.com/">npmjs.com</a>. First change the package <code>name</code> in the <em>package.json</em> file to something unique:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;version&quot;: &quot;0.1.0&quot;,</span><br><span class="line">  &quot;name&quot;: &quot;my-viewer-ui&quot;,</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br></pre></td></tr></table></figure>

<p>Then publish the package:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm login</span><br><span class="line">npm publish</span><br></pre></td></tr></table></figure>

<p>After published and propagated on the network, your package is available for download. The package files are also served by services like <a target="_blank" rel="noopener" href="https://jsdelivr.com/">jsdelivr</a> (better for production use) or <a target="_blank" rel="noopener" href="https://unpkg.com/">unpkg</a> (better for testing). Use your user interface by specifying it in the <a href="../config.html">viewer config</a>:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const uiMachineOptions = &#123; href: &quot;https://cdn.jsdelivr.net/npm/itk-viewer-reference-ui-template@0.1.2/dist/referenceUIMachineOptions.js.es.js&quot; &#125;</span><br><span class="line">// or</span><br><span class="line">// const uiMachineOptions = &#123; href: &quot;https://unpkg.com/itk-viewer-reference-ui-template@0.1.2/dist/referenceUIMachineOptions.js.es.js&quot; &#125;</span><br><span class="line">itkVtkViewer.createViewer(container,</span><br><span class="line">  &#123;</span><br><span class="line">  image: ipfsImage,</span><br><span class="line">  rotate: false,</span><br><span class="line">  config: &#123; uiMachineOptions &#125;,</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

              </div>
              <footer class="article-footer">
                <time class="article-footer-updated" datetime="2022-10-18T00:47:35.647Z" itemprop="dateModified">Last updated: 2022-10-18</time>
                <a href="shortcuts.html" class="article-footer-prev" title="Keyboard Shortcuts"><i class="fa fa-chevron-left"></i><span>Prev</span></a>
              </footer>
              
            </div>
          </div>
          <aside id="article-toc" role="navigation">
            <div id="article-toc-inner">
              <strong class="sidebar-title">Contents</strong>
              <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#UI-options-architecture"><span class="toc-text">UI options architecture</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Example-Main-UI-with-only-a-screenshot-button"><span class="toc-text">Example: Main UI with only a screenshot button</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Create-repository"><span class="toc-text">Create repository</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Edit-interface"><span class="toc-text">Edit interface</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Publish-the-UI-module"><span class="toc-text">Publish the UI module</span></a></li></ol></li></ol>
              <a href="#" id="article-toc-top">Back to Top</a>
            </div>
          </aside>
        </div>
      </article>
      <aside id="sidebar" role="navigation">
  <div class="inner"><strong class="sidebar-title">Getting Started</strong><a href="index.html" class="sidebar-link">Overview</a><a href="viewer.html" class="sidebar-link">Progressive Web App</a><a href="cli.html" class="sidebar-link">Command Line App</a><a href="embeddedViewer.html" class="sidebar-link">Inline Viewer</a><a href="imjoy.html" class="sidebar-link">ImJoy Plugin</a><a href="shortcuts.html" class="sidebar-link">Keyboard Shortcuts</a><a href="customizeUI.html" class="sidebar-link current">UI Customization</a></div>
</aside>
    </div>
  </div>
</div>

    <footer id="footer" class="wrapper">
  <div class="inner">
    <div id="footer-copyright">
      &copy; 2022 <a href="https://www.kitware.com/" target="_blank">Kitware Inc.</a>
    </div>
    <div id="footer-links">
      <a href="https://github.com/kitware/itk-vtk-viewer" class="footer-link" target="_blank"><i class="fa fa-github-alt"></i></a>
    </div>
  </div>
</footer>

  </div>
  <div id="mobile-nav-dimmer"></div>
  <nav id="mobile-nav">
  <div id="mobile-nav-inner">
    <ul id="mobile-nav-list">
      <a href="/itk-vtk-viewer/docs/" class="mobile-nav-link">Documentation</a><a href="/itk-vtk-viewer/api/" class="mobile-nav-link">API</a><a href="/itk-vtk-viewer/config/" class="mobile-nav-link">Config</a><a href="/itk-vtk-viewer/app/" class="mobile-nav-link">Application</a>
      <li class="mobile-nav-item">
        <a href="https://github.com/kitware/itk-vtk-viewer" class="mobile-nav-link" rel="external" target="_blank">GitHub</a>
      </li>
    </ul>
    
      <strong class="mobile-nav-title">Getting Started</strong><a href="index.html" class="mobile-nav-link">Overview</a><a href="viewer.html" class="mobile-nav-link">Progressive Web App</a><a href="cli.html" class="mobile-nav-link">Command Line App</a><a href="embeddedViewer.html" class="mobile-nav-link">Inline Viewer</a><a href="imjoy.html" class="mobile-nav-link">ImJoy Plugin</a><a href="shortcuts.html" class="mobile-nav-link">Keyboard Shortcuts</a><a href="customizeUI.html" class="mobile-nav-link current">UI Customization</a>
    
  </div>
  <div id="mobile-lang-select-wrap">
    <span id="mobile-lang-select-label"><i class="fa fa-globe"></i><span>English</span></span>
    <select id="mobile-lang-select" data-canonical="docs/customizeUI.html">
      
        <option value="en" selected>English</option>
      
    </select>
  </div>
</nav>
  <!-- Scripts -->
<!-- build:js build/js/main.js -->

<script src="/itk-vtk-viewer/js/lang_select.js"></script>


<script src="/itk-vtk-viewer/js/toc.js"></script>


<script src="/itk-vtk-viewer/js/mobile_nav.js"></script>

<!-- endbuild -->
<script src="https://cdn.jsdelivr.net/retinajs/1.3.0/retina.min.js" async></script>



</body>
</html>