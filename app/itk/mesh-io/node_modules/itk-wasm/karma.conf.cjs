const os=require("os"),path=require("path"),webpack=require("webpack"),sourcePath=path.resolve(__dirname,"./dist");process.env.NODE_ENV||(process.env.NODE_ENV="test"),process.env.CHROME_BIN||(process.env.CHROME_BIN=require("puppeteer").executablePath());const testFiles=["./test/browser/tests.js"];"1"!==process.env.NO_VTK&&testFiles.push("./test/browser/testsVTK.js");const testConfig=path.resolve(__dirname,"test","browser","config","itkConfigBrowserTest.js"),output={path:path.join(os.tmpdir(),"_karma_webpack_")+Math.floor(1e6*Math.random())};module.exports=function(e){e.set({plugins:[require("karma-webpack"),require("karma-tap"),require("karma-chrome-launcher"),require("karma-tap-pretty-reporter")],basePath:"",frameworks:["tap","webpack"],files:[{pattern:"./dist/image-io/**",watched:!0,served:!0,included:!1},{pattern:"./dist/mesh-io/**",watched:!0,served:!0,included:!1},{pattern:"./dist/web-workers/**",watched:!0,served:!0,included:!1},{pattern:"./dist/pipeline/**",watched:!0,served:!0,included:!1},{pattern:"./build-emscripten/ExternalData/test/**",watched:!0,served:!0,included:!1},{pattern:`${output.path}/**/*`,watched:!1,included:!1}].concat(testFiles),preprocessors:{"./test/browser/**/*.js":["webpack"]},webpack:{mode:"development",module:{rules:[].concat()},output,resolve:{modules:[path.resolve(__dirname,"node_modules"),sourcePath],fallback:{assert:!1,module:!1,url:!1,path:require.resolve("path-browserify"),fs:!1},alias:{"../itkConfig.js":testConfig,"../../itkConfig.js":testConfig,stream:"stream-browserify"}},plugins:[new webpack.DefinePlugin({__BASE_PATH__:"'/base'"}),new webpack.ProvidePlugin({process:["process/browser"]})]},webpackMiddleware:{noInfo:!0},reporters:["tap-pretty"],client:{useIframe:!0},customLaunchers:{ChromeHeadlessNoSandbox:{base:"ChromeHeadless",flags:["--no-sandbox"]}},port:9876,colors:!0,logLevel:e.LOG_INFO,autoWatch:!0,browsers:["Chrome"],singleRun:!0})};