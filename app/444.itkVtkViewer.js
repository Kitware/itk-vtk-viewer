(()=>{var r,e,n={9857:(r,e,n)=>{"use strict";var t=n(8270),a=n(4390),o=n(3486),i=n(4641),u=n(4264),c=n.n(u),s=n(6579),p=n.n(s),f=n(7800),m=n(4630),l=n(16),g=n(474),d=n.n(g);function v(){var r=Number.POSITIVE_INFINITY,e=Number.NEGATIVE_INFINITY;return{add:function(n){r>n&&(r=n),e<n&&(e=n)},getRange:function(){return{min:r,max:e}}}}var b="function"==typeof globalThis.SharedArrayBuffer,h=navigator.hardwareConcurrency?Math.min(navigator.hardwareConcurrency,8):4,y=function(r,e,n){var t=function(r){var n=null!=r?r:e();return{webWorkerPromise:new(d())(n),worker:n}},o=function(){var r=(0,a.Z)(c().mark((function r(e){var a,o,i,u,s,p,f,m=arguments;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(a=t(e),o=a.webWorkerPromise,i=a.worker,u=m.length,s=new Array(u>1?u-1:0),p=1;p<u;p++)s[p-1]=m[p];return r.next=4,o.exec.apply(o,[n].concat(s));case 4:return f=r.sent,r.abrupt("return",{result:f,webWorker:i});case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();return new l.Z(r,o)}(h,(function(){return new Worker(new URL(n.p+n.u(764),n.b),{type:void 0})}),"computeRanges");function w(r){return k.apply(this,arguments)}function k(){return k=(0,a.Z)(c().mark((function r(e){var n,t,a,i,u,s,p,f,m,l,g,d,w=arguments;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=w.length>1&&void 0!==w[1]?w[1]:1,t=h,a=new Array(t),b&&e.buffer instanceof SharedArrayBuffer)for(i=0;i<t;i++)a[i]=[{split:i,numberOfSplits:t,values:e,numberOfComponents:n}];else for(u=Math.floor(e.length/t)||1,u+=u%n,s=0,p=0;p<t;p++)f=s,m=Math.min(s+u,e.length-1),l=e.slice(f,m+1),a[p]=[{split:0,numberOfSplits:1,values:l,numberOfComponents:n},[l.buffer]],s+=u;return r.next=6,y.runTasks(a).promise;case 6:return g=r.sent,d=(0,o.Z)(Array(n)).map(v),g.forEach((function(r){r.result.forEach((function(r,e){var n=r.min,t=r.max;d[e].add(n),d[e].add(t)}))})),r.abrupt("return",d.map((function(r){return r.getRange()})));case 10:case"end":return r.stop()}}),r)}))),k.apply(this,arguments)}var x=n(8155),O=n(6344),Z=n(2182),j=n(8677),I=n(8473);function P(r){return E.apply(this,arguments)}function E(){return E=(0,a.Z)(c().mark((function r(e){var n,t,a,i,u,s,p,f,m,g,d,v,b,h,y,w,k,P,E;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.pipeline,t=e.args,a=e.images,i=e.outputs,u=void 0===i?[{type:x.Z.Image}]:i,s=e.maxSplits,p=void 0===s?4:s,f=I.Z.pipelinesUrl,m=I.Z.pipelineWorkerUrl,g=f.startsWith("blob:")?f.substring(5):f,I.Z.pipelinesUrl=new URL(g,self.location.origin).href,d=m.startsWith("blob:")?m.substring(5):m,I.Z.pipelineWorkerUrl=new URL(d,self.location.origin).href,v=navigator.hardwareConcurrency||6,b=a[0],h=Math.min(parseInt(v/2),Math.max(b.size[b.size.length-1],1),p),y=(0,o.Z)(Array(h).keys()).map((function(r){var e=[].concat((0,o.Z)((0,o.Z)(Array(a.length).keys()).map((function(r){return r.toString()}))),["0"],(0,o.Z)(t.map((function(r){return r.toString()}))),["--max-total-splits",""+h,"--split",""+r,"--number-of-splits",""+h,"--memory-io"]),i=a.map((function(r){return{type:x.Z.Image,data:(0,O.Z)(r)}}));return[n,e,u,i]})),w=new l.Z(v,Z.Z),r.next=13,w.runTasks(y).promise;case 13:return k=r.sent,w.terminateWorkers(),P=k.filter((function(r){return 0===r.returnValue})),E=P.map((function(r){return r.outputs[0].data})),r.abrupt("return",(0,j.Z)(E));case 18:case"end":return r.stop()}}),r)}))),E.apply(this,arguments)}async function T(r,e,{minMax:n,checkerboard:t,pattern:a}){const o=a?e.size.map(((r,e)=>Math.min(r,a[e]))):[],i=["--checkerboard",t.toString(),"--range",n.join(","),"--pattern",o.join(",")],u=await P({pipeline:"Compare",args:i,images:[r,e],maxSplits:1});return u.ranges=[n,n],u}async function A(r,e){const{size:n,spacing:t,origin:a,direction:o}=r;return P({pipeline:"ResampleLabelImage",args:["--size",n.join(","),"--spacing",t.join(","),"--origin",a.join(","),"--direction",o.join(",")],images:[e]})}function C(r,e){return["size","direction","origin","spacing"].map((n=>function(r,e){if(r===e)return!0;if(null==r||null==e)return!1;if(r.length!==e.length)return!1;for(var n=0;n<r.length;++n)if(r[n]!==e[n])return!1;return!0}(r[n],e[n]))).every((r=>r))}function S(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.push.apply(n,t)}return n}function M(r){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(Object(n),!0).forEach((function(e){(0,t.Z)(r,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}))}return r}var _=function(r,e){return r+e},N=function(r){for(var e=r.componentInfo,n=r.arrayToFill,t=function(r){return r.map((function(r){var e=r.data,n=r.srcComponentCount;return e.length/n})).reduce(_)}(e),a=null!=n?n:new(function(r){return r.map((function(r){return r.data})).reduce((function(r,e){return r.BYTES_PER_ELEMENT>=e.BYTES_PER_ELEMENT?r:e}))}(e).constructor)(t),o=e.length,i=t/o,u=0;u<o;u++)for(var c=e[u],s=c.data,p=c.srcComponentCount,f=c.fromComponent,m=0;m<i;m++)a[m*o+u]=s[m*p+f];return a},R=function(r){return r?(Array.isArray(r)?r:[r]).flatMap((function(r){var e=r.imageType.components;return(0,o.Z)(Array(e).keys()).map((function(n){return{fromComponent:n,srcComponentCount:e,image:r,data:r.data}}))})):[]},U=function(){var r=(0,a.Z)(c().mark((function r(e){var n,t,a,o,u,s,p,f,m,l,g,d;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=e.image,t=e.labelImage,a=e.components,Array.isArray(n)||t||n.imageType.components!==a.length){r.next=3;break}return r.abrupt("return",n);case 3:return o=[n,t].map((function(r){return R(r)})),u=(0,i.Z)(o,2),s=u[0],p=u[1],(f=a.map((function(r){return r>=0?s[r]:p[-1*r-1]}))).forEach((function(r,e){if(!r)throw new Error("pickAndFuseComponents: Missing component for requested component: "+e)})),m=N({componentInfo:f}),l=f.map((function(r){var e=r.image.ranges,n=r.fromComponent;return e&&e[n]})),g=Array.isArray(n)?n[0]:n,d=M(M({},g),{},{data:m,imageType:M(M({},g.imageType),{},{components:a.length}),ranges:l}),r.abrupt("return",d);case 11:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();function W(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.push.apply(n,t)}return n}function D(r){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?W(Object(n),!0).forEach((function(e){(0,t.Z)(r,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}))}return r}var z=function(){var r=(0,a.Z)(c().mark((function r(e){var n,t,a;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t=R(e),null===(u=void 0,n=null===(u=t.map((function(r){var e=r.image.ranges,n=r.fromComponent;return null==e?void 0:e[n]})).reduce((function(r,e){if(r&&e)return[].concat((0,o.Z)(r),[e])}),[]))||void 0===u?void 0:u.map((function(r){var e=(0,i.Z)(r,2);return{min:e[0],max:e[1]}})))||void 0===n){r.next=5;break}r.t0=n,r.next=8;break;case 5:return r.next=7,w(e.data,t.length);case 7:r.t0=r.sent;case 8:return a=r.t0,e.ranges=a.map((function(r){return[r.min,r.max]})),r.abrupt("return",e);case 11:case"end":return r.stop()}var u}),r)})));return function(e){return r.apply(this,arguments)}}(),B=function(){var r=(0,a.Z)(c().mark((function r(e){var n,t;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=e.targetImage,(t=e.resampleImage)&&n){r.next=3;break}return r.abrupt("return",t);case 3:if(!C(n,t)){r.next=5;break}return r.abrupt("return",t);case 5:return r.abrupt("return",A(n,t));case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),L=function(r,e){var n=e.filter((function(r){return r>=0}));return U({image:r,components:n})},V=function(r){return Array.isArray(r)?(n=(e=r).map((function(r){return r.imageType.components})).reduce(_),t=(0,o.Z)(Array(n).keys()),U({image:e,components:t})):r;var e,n,t},F=function(){var r=(0,a.Z)(c().mark((function r(e){var n,t,a,o,u,s,p,l,g,d,b;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=e.image,t=e.fixedImage,(a=e.options).method&&"disabled"!==a.method){r.next=3;break}return r.abrupt("return",n);case 3:if(t){r.next=6;break}return console.error("No fixed image"),r.abrupt("return");case 6:return r.next=8,V(n);case 8:return o=r.sent,r.next=11,V(t);case 11:return u=r.sent,void 0,void 0,y=void 0,w=void 0,c=[o,u].map(f.Z.convertItkToVtkImage),y=(h=(0,i.Z)(c,2))[0],w=h[1],m.ZP.intersects(y.getBounds(),w.getBounds())||console.warn("Trying to compare images but bounds do not intersect. Moving image will be empty."),r.next=15,z(u);case 15:return s=r.sent,p=s.ranges,l=v(),p.flat().forEach((function(r){return l.add(r)})),g=l.getRange(),d=g.min,b=g.max,r.abrupt("return",T(o,u,D({minMax:[d,b]},a)));case 21:case"end":return r.stop()}var c,h,y,w}),r)})));return function(e){return r.apply(this,arguments)}}(),Y=function(){var r=(0,a.Z)(c().mark((function r(e,n){var t,a;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=[].concat((0,o.Z)(Array(e.imageType.components).keys()),[-1]),r.next=3,U({image:e,labelImage:n,components:t});case 3:return a=r.sent,r.abrupt("return",a);case 5:case"end":return r.stop()}}),r)})));return function(e,n){return r.apply(this,arguments)}}();p()(function(){var r=(0,a.Z)(c().mark((function r(e){var n,t,a,o,i,u,s;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.image,t=e.labelImage,a=e.visualizedComponents,o=e.fixedImage,i=e.compare,r.next=3,F({image:n,fixedImage:o,options:i});case 3:return u=r.sent,r.next=6,L(u,a);case 6:return u=r.sent,r.next=9,B({targetImage:u,resampleImage:t});case 9:if(!(s=r.sent)){r.next=16;break}return r.next=13,Y(u,s);case 13:r.t0=r.sent,r.next=17;break;case 16:r.t0=u;case 17:return u=r.t0,r.next=20,z(u);case 20:return u=r.sent,r.abrupt("return",new(p().TransferableResponse)({image:u},[u.data.buffer]));case 22:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())},8473:(r,e,n)=>{"use strict";n.d(e,{Z:()=>t});const t={pipelineWorkerUrl:n.p+"itk/web-workers/min-bundles/pipeline.worker.js",imageIOUrl:n.p+"itk/image-io",meshIOUrl:n.p+"itk/mesh-io",pipelinesUrl:n.p+"itk/pipeline"}},5042:()=>{}},t={};function a(r){var e=t[r];if(void 0!==e)return e.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return n[r].call(o.exports,o,o.exports,a),o.loaded=!0,o.exports}a.m=n,a.x=()=>{var r=a.O(void 0,[480,159,774],(()=>a(9857)));return a.O(r)},a.amdD=function(){throw new Error("define cannot be used indirect")},a.amdO={},r=[],a.O=(e,n,t,o)=>{if(!n){var i=1/0;for(p=0;p<r.length;p++){for(var[n,t,o]=r[p],u=!0,c=0;c<n.length;c++)(!1&o||i>=o)&&Object.keys(a.O).every((r=>a.O[r](n[c])))?n.splice(c--,1):(u=!1,o<i&&(i=o));if(u){r.splice(p--,1);var s=t();void 0!==s&&(e=s)}}return e}o=o||0;for(var p=r.length;p>0&&r[p-1][2]>o;p--)r[p]=r[p-1];r[p]=[n,t,o]},a.n=r=>{var e=r&&r.__esModule?()=>r.default:()=>r;return a.d(e,{a:e}),e},a.d=(r,e)=>{for(var n in e)a.o(e,n)&&!a.o(r,n)&&Object.defineProperty(r,n,{enumerable:!0,get:e[n]})},a.f={},a.e=r=>Promise.all(Object.keys(a.f).reduce(((e,n)=>(a.f[n](r,e),e)),[])),a.u=r=>r+".itkVtkViewer.js",a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(r){if("object"==typeof window)return window}}(),a.o=(r,e)=>Object.prototype.hasOwnProperty.call(r,e),a.nmd=r=>(r.paths=[],r.children||(r.children=[]),r),(()=>{var r;a.g.importScripts&&(r=a.g.location+"");var e=a.g.document;if(!r&&e&&(e.currentScript&&(r=e.currentScript.src),!r)){var n=e.getElementsByTagName("script");n.length&&(r=n[n.length-1].src)}if(!r)throw new Error("Automatic publicPath is not supported in this browser");r=r.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=r})(),(()=>{a.b=self.location+"";var r={444:1};a.f.i=(e,n)=>{r[e]||importScripts(a.p+a.u(e))};var e=self.webpackChunkitk_vtk_viewer=self.webpackChunkitk_vtk_viewer||[],n=e.push.bind(e);e.push=e=>{var[t,o,i]=e;for(var u in o)a.o(o,u)&&(a.m[u]=o[u]);for(i&&i(a);t.length;)r[t.pop()]=1;n(e)}})(),e=a.x,a.x=()=>Promise.all([480,159,774].map(a.e,a)).then(e),a.x()})();
//# sourceMappingURL=444.itkVtkViewer.js.map