!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("itkVtkViewer",[],r):"object"==typeof exports?exports.itkVtkViewer=r():e.itkVtkViewer=r()}(self,(()=>(()=>{"use strict";var e,r,t={6579:(e,r,t)=>{var n=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),o=function e(r,t,n){null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,t);if(void 0===o){var a=Object.getPrototypeOf(r);return null===a?void 0:e(a,t,n)}if("value"in o)return o.value;var i=o.get;return void 0!==i?i.call(n):void 0},a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}function u(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function c(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}var f=t(6603),s="main",l=function e(r,t){u(this,e),this.payload=r,this.transferable=t};e.exports=function(e){var r,t,y,p=(y=e,(t=s)in(r={})?Object.defineProperty(r,t,{value:y,enumerable:!0,configurable:!0,writable:!0}):r.main=y,r),h=self.postMessage.bind(self),v=new(function(e){function r(){return u(this,r),c(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}(r,e),n(r,[{key:"emit",value:function(e){for(var r=arguments.length,t=Array(r>1?r-1:0),n=1;n<r;n++)t[n-1]=arguments[n];return h({eventName:e,args:t}),this}},{key:"emitLocally",value:function(e){for(var t,n=arguments.length,a=Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];(t=o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"emit",this)).call.apply(t,[this,e].concat(a))}},{key:"operation",value:function(e,r){return p[e]=r,this}}]),r}(f)),b=function(e,r,t){var n,o=function(r){r&&r instanceof l?m(e,1,r.payload,r.transferable):m(e,1,r)},i=function(r){m(e,0,{message:r.message,stack:r.stack})};try{var u=d(e,r,t);"object"===(void 0===(n=u)?"undefined":a(n))&&"function"==typeof n.then&&"function"==typeof n.catch?u.then(o).catch(i):o(u)}catch(e){i(e)}},d=function(e,r,t){var n=p[t||s];if(!n)throw new Error("Not found handler for this request");return n(r,g.bind(null,e))},m=function(e,r,t){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];h([0,e,r,t],n)},g=function(e,r,t){if(!r)throw new Error("eventName is required");if("string"!=typeof r)throw new Error("eventName should be string");h([1,e,r,t])};return self.addEventListener("message",(function(e){var r=e.data;Array.isArray(r)?b.apply(void 0,i(r)):r&&r.eventName&&v.emitLocally.apply(v,[r.eventName].concat(i(r.args)))})),v},e.exports.TransferableResponse=l},6603:e=>{var r=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),t=function(){function e(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"__listeners",{value:{},enumerable:!1,writable:!1})}return r(e,[{key:"emit",value:function(e){if(!this.__listeners[e])return this;for(var r=arguments.length,t=Array(r>1?r-1:0),n=1;n<r;n++)t[n-1]=arguments[n];var o=!0,a=!1,i=void 0;try{for(var u,c=this.__listeners[e][Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var f=u.value;f.apply(void 0,t)}}catch(e){a=!0,i=e}finally{try{!o&&c.return&&c.return()}finally{if(a)throw i}}return this}},{key:"once",value:function(e,r){var t=this;return this.on(e,(function n(){t.off(e,n),r.apply(void 0,arguments)}))}},{key:"on",value:function(e,r){return this.__listeners[e]||(this.__listeners[e]=[]),this.__listeners[e].push(r),this}},{key:"off",value:function(e,r){return this.__listeners[e]=r?this.__listeners[e].filter((function(e){return e!==r})):[],this}}]),e}();e.exports=t},5399:(e,r,t)=>{var n=t(4390),o=t(8270),a=t(4641),i=t(4264),u=t.n(i),c=t(6579),f=t.n(c),s=t(3486),l=t(16),y=t(474),p=t.n(y);function h(){var e=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return{add:function(t){e>t&&(e=t),r<t&&(r=t)},getRange:function(){return{min:e,max:r}}}}var v="function"==typeof globalThis.SharedArrayBuffer,b=navigator.hardwareConcurrency?Math.min(navigator.hardwareConcurrency,8):4,d=function(e,r,t){var o=function(e){var t=null!=e?e:r();return{webWorkerPromise:new(p())(t),worker:t}},a=function(){var e=(0,n.Z)(u().mark((function e(r){var n,a,i,c,f,s,l,y=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=o(r),a=n.webWorkerPromise,i=n.worker,c=y.length,f=new Array(c>1?c-1:0),s=1;s<c;s++)f[s-1]=y[s];return e.next=4,a.exec.apply(a,[t].concat(f));case 4:return l=e.sent,e.abrupt("return",{result:l,webWorker:i});case 6:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return new l.Z(e,a)}(b,(function(){return new Worker(new URL(t.p+t.u(764),t.b),{type:void 0})}),"computeRanges");function m(e){return g.apply(this,arguments)}function g(){return g=(0,n.Z)(u().mark((function e(r){var t,n,o,a,i,c,f,l,y,p,m,g,w=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=w.length>1&&void 0!==w[1]?w[1]:1,n=b,o=new Array(n),v&&r.buffer instanceof SharedArrayBuffer)for(a=0;a<n;a++)o[a]=[{split:a,numberOfSplits:n,values:r,numberOfComponents:t}];else for(i=Math.floor(r.length/n)||1,i+=i%t,c=0,f=0;f<n;f++)l=c,y=Math.min(c+i,r.length-1),p=r.slice(l,y+1),o[f]=[{split:0,numberOfSplits:1,values:p,numberOfComponents:t},[p.buffer]],c+=i;return e.next=6,d.runTasks(o).promise;case 6:return m=e.sent,g=(0,s.Z)(Array(t)).map(h),m.forEach((function(e){e.result.forEach((function(e,r){var t=e.min,n=e.max;g[r].add(t),g[r].add(n)}))})),e.abrupt("return",g.map((function(e){return e.getRange()})));case 10:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}const w="int8",x="uint8",O="int16",k="uint16",A="int32",j="uint32",_="int64",E="uint64",I="float32",S="float64",P=new Map([[w,Int8Array],[x,Uint8Array],[O,Int16Array],[k,Uint16Array],[A,Int32Array],[j,Uint32Array],[I,Float32Array],[S,Float64Array]]);var z=Object.freeze(["c","x","y","z","t"]),T=function(e,r,t){return r.reduce((function(r,t){var n;return r.set(t,null!==(n=r.get(t))&&void 0!==n?n:e)}),new Map(t))},M="function"==typeof globalThis.BigInt64Array?globalThis.BigInt64Array:Int32Array,V="function"==typeof globalThis.BigUint64Array?globalThis.BigUint64Array:Uint32Array,N=Array.from(new Map([["b",[Int8Array,"getInt8",w]],["B",[Uint8Array,"getUint8",x]],["u1",[Uint8Array,"getUint8",x]],["i1",[Int8Array,"getInt8",w]],["u2",[Uint16Array,"getUint16",k]],["i2",[Int16Array,"getInt16",O]],["u4",[Uint32Array,"getUint32",j]],["i4",[Int32Array,"getInt32",A]],["u8",[V,"getBigUint64",E]],["i8",[M,"getBigInt64",_]],["f4",[Float32Array,"getFloat32",I]],["f8",[Float64Array,"getFloat64",S]]])).reduce((function(e,r){var t=(0,a.Z)(r,2),n=t[0],o=(0,a.Z)(t[1],3),i=o[0],u=o[1],c=o[2];return e.set(n,{TypedArray:i,dataViewGetter:u,itkComponent:c})}),new Map),U=function(e){return e.replace(/^(<|>|=|\|)/,"")},B=function(e){var r=U(e);return r.length<2?1:Number(r.slice(-1))},Z=function(e){return"<"===e.charAt(0)};function C(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function F(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?C(Object(t),!0).forEach((function(r){(0,o.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):C(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var R,D="function"==typeof self.SharedArrayBuffer,W=(R=new ArrayBuffer(2),new DataView(R).setInt16(0,256,!0),256===new Int16Array(R)[0]),L=function(e){var r=e.scaleInfo,t=e.imageType,n=e.chunkIndices,i=e.chunks,u=e.indexStart,c=e.indexEnd,f=P.get(t.componentType),s=null,l=Array.from(r.arrayShape.values()).reduce((function(e,r){return e*r}));if(D){var y=l*f.BYTES_PER_ELEMENT,p=new SharedArrayBuffer(y);s=new f(p)}else s=new f(l);for(var h=Object.fromEntries(T(1,z,r.arrayShape)),v={z:h.c*h.x*h.y,y:h.c*h.x,x:h.c},b=T(1,z,r.chunkSize),d=Object.fromEntries(b),m=Array.from(b).reverse().reduce((function(e,r){var t=(0,a.Z)(e,2),n=t[0],i=t[1],u=(0,a.Z)(r,2),c=u[0],f=u[1];return[F((0,o.Z)({},c,i),n),i*f]}),[{},1]),g=(0,a.Z)(m,1)[0],w=function(e){var t=(0,a.Z)(n[e],4),o=t[0],f=t[1],l=t[2],y=t[3],p={c:o*d.c,z:y*d.z,y:l*d.y,x:f*d.x},b={c:(o+1)*d.c,z:(y+1)*d.z,y:(l+1)*d.y,x:(f+1)*d.x},m=Object.fromEntries(T(0,z,u)),w=Object.fromEntries(T(1,z,c));!function(e){var r=e.chunkStart,t=e.chunkEnd,n=e.roiStart,o=e.roiEnd;["x","y","z"].some((function(e){return r[e]>o[e]||t[e]<n[e]}))&&console.error("Requested a chunk outside the region of interest!")}({chunkStart:p,chunkEnd:b,roiStart:m,roiEnd:w});var x,O={c:Math.max(p.c,m.c),z:Math.max(p.z,m.z),y:Math.max(p.y,m.y),x:Math.max(p.x,m.x)},k=Math.min(b.c,w.c),A=Math.min(b.z,w.z),j=Math.min(b.y,w.y),_=Math.min(b.x,w.x),E=Object.keys(v).reduce((function(e,r){return e+v[r]*m[r]}),0),I=Array.from(r.arrayShape.keys()).join(""),S=I.endsWith("xc")||1===h.c&&I.endsWith("x"),P=1===B(r.dtype)||W===Z(r.dtype);if(S&&P)for(var M=new(x=r.dtype,N.get(U(x)).TypedArray)(i[e]),V=(O.x-f*d.x)*g.x,C=O.z;C<A;C++)for(var F=(C-y*d.z)*g.z,R=C*v.z-E,D=O.y;D<j;D++){var L=V+(D-l*d.y)*g.y+F,q=M.subarray(L,L+k*(_-O.x)),G=O.x*v.x+D*v.y+R;s.set(q,G)}else for(var Y=function(e,r){var t=new DataView(r),n=B(e),o=Z(e),a=N.get(U(e)).dataViewGetter;return function(e){return t[a](e*n,o)}}(r.dtype,i[e]),H=O.c;H<k;H++)for(var J=(H-o*d.c)*g.c,K=O.z;K<A;K++)for(var Q=(K-y*d.z)*g.z+J,X=K*v.z+H-E,$=O.y;$<j;$++)for(var ee=($-l*d.y)*g.y+Q,re=$*v.y+X,te=O.x;te<_;te++)s[te*v.x+re]=Y((te-f*d.x)*g.x+ee)},x=0;x<n.length;x++)w(x);return s};f()().operation("imageDataFromChunks",function(){var e=(0,n.Z)(u().mark((function e(r){var t,n,o,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=L(r),!r.areRangesNeeded){e.next=7;break}return e.next=4,m(n,null!==(t=r.scaleInfo.arrayShape.get("c"))&&void 0!==t?t:1);case 4:e.t0=e.sent.map((function(e){return[e.min,e.max]})),e.next=8;break;case 7:e.t0=void 0;case 8:return o=e.t0,a={pixelArray:n,ranges:o},e.abrupt("return",D?a:new(f().TransferableResponse)(a,[n.buffer]));case 11:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}())}},n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,o),a.exports}return o.m=t,o.x=()=>{var e=o.O(void 0,[159],(()=>o(5399)));return o.O(e)},e=[],o.O=(r,t,n,a)=>{if(!t){var i=1/0;for(s=0;s<e.length;s++){for(var[t,n,a]=e[s],u=!0,c=0;c<t.length;c++)(!1&a||i>=a)&&Object.keys(o.O).every((e=>o.O[e](t[c])))?t.splice(c--,1):(u=!1,a<i&&(i=a));if(u){e.splice(s--,1);var f=n();void 0!==f&&(r=f)}}return r}a=a||0;for(var s=e.length;s>0&&e[s-1][2]>a;s--)e[s]=e[s-1];e[s]=[t,n,a]},o.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return o.d(r,{a:r}),r},o.d=(e,r)=>{for(var t in r)o.o(r,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce(((r,t)=>(o.f[t](e,r),r)),[])),o.u=e=>e+".itkVtkViewerCDN.js",o.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),o.p="https://cdn.jsdelivr.net/npm/",(()=>{o.b=self.location+"";var e={399:1};o.f.i=(r,t)=>{e[r]||importScripts(o.p+o.u(r))};var r=self.webpackChunkitkVtkViewer=self.webpackChunkitkVtkViewer||[],t=r.push.bind(r);r.push=r=>{var[n,a,i]=r;for(var u in a)o.o(a,u)&&(o.m[u]=a[u]);for(i&&i(o);n.length;)e[n.pop()]=1;t(r)}})(),r=o.x,o.x=()=>o.e(159).then(r),o.x()})()));