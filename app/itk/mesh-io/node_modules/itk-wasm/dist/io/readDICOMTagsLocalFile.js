import path from"path";import loadEmscriptenModule from"../core/internal/loadEmscriptenModuleNode.js";import runPipelineEmscripten from"../pipeline/internal/runPipelineEmscripten.js";import findLocalImageIOPath from"./internal/findLocalImageIOPath.js";import InterfaceTypes from"../core/InterfaceTypes.js";async function readDICOMTagsLocalFile(e,a=null){const t=findLocalImageIOPath(),n=path.join(t,"ReadDICOMTags.js"),r=await loadEmscriptenModule(n),i=r.mountContainingDir(e),o=path.dirname(i),p=[path.join(o,path.basename(e)),"0","--memory-io"],s=[];null!=a&&(p.push("--tags-to-read"),p.push("0"),s.push({type:InterfaceTypes.TextStream,data:{data:JSON.stringify({tags:a})}}));const m=[{type:InterfaceTypes.TextStream}],{outputs:l}=runPipelineEmscripten(r,p,m,s);r.unmountContainingDir(i);const c=l[0].data.data,d=JSON.parse(c);return new Map(d.tags)}export default readDICOMTagsLocalFile;