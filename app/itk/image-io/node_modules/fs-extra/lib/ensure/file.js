"use strict";const u=require("universalify").fromCallback,path=require("path"),fs=require("graceful-fs"),mkdir=require("../mkdirs");function createFile(e,r){function i(){fs.writeFile(e,"",(e=>{if(e)return r(e);r()}))}fs.stat(e,((t,c)=>{if(!t&&c.isFile())return r();const s=path.dirname(e);fs.stat(s,((e,t)=>{if(e)return"ENOENT"===e.code?mkdir.mkdirs(s,(e=>{if(e)return r(e);i()})):r(e);t.isDirectory()?i():fs.readdir(s,(e=>{if(e)return r(e)}))}))}))}function createFileSync(e){let r;try{r=fs.statSync(e)}catch{}if(r&&r.isFile())return;const i=path.dirname(e);try{fs.statSync(i).isDirectory()||fs.readdirSync(i)}catch(e){if(!e||"ENOENT"!==e.code)throw e;mkdir.mkdirsSync(i)}fs.writeFileSync(e,"")}module.exports={createFile:u(createFile),createFileSync};