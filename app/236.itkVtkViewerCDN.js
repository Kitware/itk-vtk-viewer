!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("itkVtkViewer",[],t):"object"==typeof exports?exports.itkVtkViewer=t():e.itkVtkViewer=t()}(self,(()=>(()=>{"use strict";var e,t,n={6579:(e,t,n)=>{var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(r):void 0},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=n(6603),c="main",u=function e(t,n){s(this,e),this.payload=t,this.transferable=n};e.exports=function(e){var t,n,I,m=(I=e,(n=c)in(t={})?Object.defineProperty(t,n,{value:I,enumerable:!0,configurable:!0,writable:!0}):t.main=I,t),p=self.postMessage.bind(self),g=new(function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"emit",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return p({eventName:e,args:n}),this}},{key:"emitLocally",value:function(e){for(var n,r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];(n=a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this)).call.apply(n,[this,e].concat(o))}},{key:"operation",value:function(e,t){return m[e]=t,this}}]),t}(f)),h=function(e,t,n){var r,a=function(t){t&&t instanceof u?O(e,1,t.payload,t.transferable):O(e,1,t)},i=function(t){O(e,0,{message:t.message,stack:t.stack})};try{var s=y(e,t,n);"object"===(void 0===(r=s)?"undefined":o(r))&&"function"==typeof r.then&&"function"==typeof r.catch?s.then(a).catch(i):a(s)}catch(e){i(e)}},y=function(e,t,n){var r=m[n||c];if(!r)throw new Error("Not found handler for this request");return r(t,d.bind(null,e))},O=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];p([0,e,t,n],r)},d=function(e,t,n){if(!t)throw new Error("eventName is required");if("string"!=typeof t)throw new Error("eventName should be string");p([1,e,t,n])};return self.addEventListener("message",(function(e){var t=e.data;Array.isArray(t)?h.apply(void 0,i(t)):t&&t.eventName&&g.emitLocally.apply(g,[t.eventName].concat(i(t.args)))})),g},e.exports.TransferableResponse=u},4236:(e,t,n)=>{var r=n(6579),a=n(4559);const o=async function(e,t){let n=null;n="string"!=typeof e?e.href:e.startsWith("http")?e:`${t}/${e}`,n.endsWith(".js")&&(n=n.substring(0,n.length-3)),n.endsWith(".wasm")&&(n=n.substring(0,n.length-5));const r=`${n}.wasm`,o=(await a.get(r,{responseType:"arraybuffer"})).data;importScripts(`${n}.umd.js`);const i=function(e){const t=e.replace(/-([a-z])/g,(e=>e[1].toUpperCase())).replace(/([^0-9a-z])/gi,"");return""===t&&console.error("Resulting string is empty."),t}(n.replace(/.*\//,""));return(0,self[i])({wasmBinary:o})},i=new Map,s=async function(e,t){let n=e,r=e,a=null;return"string"!=typeof e&&(n=new URL(e.href),r=n.href),i.has(r)||i.set(r,await o(n,t)),a=i.get(r),a},l=new Map([["image/jpeg","JPEGImageIO"],["image/png","PNGImageIO"],["image/tiff","TIFFImageIO"],["image/x-ms-bmp","BMPImageIO"],["image/x-bmp","BMPImageIO"],["image/bmp","BMPImageIO"],["application/dicom","GDCMImageIO"]]),f=new Map([["bmp","BMPImageIO"],["BMP","BMPImageIO"],["dcm","GDCMImageIO"],["DCM","GDCMImageIO"],["gipl","GiplImageIO"],["gipl.gz","GiplImageIO"],["hdf5","HDF5ImageIO"],["jpg","JPEGImageIO"],["JPG","JPEGImageIO"],["jpeg","JPEGImageIO"],["JPEG","JPEGImageIO"],["iwi","WasmImageIO"],["iwi.cbor","WasmImageIO"],["iwi.cbor.zstd","WasmZstdImageIO"],["lsm","LSMImageIO"],["mnc","MINCImageIO"],["MNC","MINCImageIO"],["mnc.gz","MINCImageIO"],["MNC.GZ","MINCImageIO"],["mnc2","MINCImageIO"],["MNC2","MINCImageIO"],["mgh","MGHImageIO"],["mgz","MGHImageIO"],["mgh.gz","MGHImageIO"],["mha","MetaImageIO"],["mhd","MetaImageIO"],["mrc","MRCImageIO"],["nia","NiftiImageIO"],["nii","NiftiImageIO"],["nii.gz","NiftiImageIO"],["hdr","NiftiImageIO"],["nrrd","NrrdImageIO"],["NRRD","NrrdImageIO"],["nhdr","NrrdImageIO"],["NHDR","NrrdImageIO"],["png","PNGImageIO"],["PNG","PNGImageIO"],["pic","BioRadImageIO"],["PIC","BioRadImageIO"],["tif","TIFFImageIO"],["TIF","TIFFImageIO"],["tiff","TIFFImageIO"],["TIFF","TIFFImageIO"],["vtk","VTKImageIO"],["VTK","VTKImageIO"],["isq","ScancoImageIO"],["ISQ","ScancoImageIO"],["fdf","FDFImageIO"],["FDF","FDFImageIO"]]),c=function(e){let t=e.slice(2+(e.lastIndexOf(".")-1>>>0));if("gz"===t.toLowerCase()){const n=e.slice(0,-3).lastIndexOf(".");t=e.slice(2+(n-1>>>0))}else if("cbor"===t.toLowerCase()){const n=e.slice(0,-5).lastIndexOf(".");t=e.slice(2+(n-1>>>0))}else if("zstd"===t.toLowerCase()){const n=e.slice(0,-10).lastIndexOf(".");t=e.slice(2+(n-1>>>0))}else if("zip"===t.toLowerCase()){const n=e.slice(0,-4).lastIndexOf(".");t=e.slice(2+(n-1>>>0))}return t},u=["PNGImageIO","MetaImageIO","TIFFImageIO","NiftiImageIO","JPEGImageIO","NrrdImageIO","VTKImageIO","BMPImageIO","HDF5ImageIO","MINCImageIO","MRCImageIO","LSMImageIO","MGHImageIO","BioRadImageIO","GiplImageIO","GEAdwImageIO","GE4ImageIO","GE5ImageIO","GDCMImageIO","ScancoImageIO","FDFImageIO","WasmImageIO","WasmZstdImageIO"];var I=n(1593),m=function(e){return this instanceof m?(this.v=e,this):new m(e)},p=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,a=n.apply(e,t||[]),o=[];return r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r;function i(e){a[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=a[e](t)).value instanceof m?Promise.resolve(n.value.v).then(l,f):c(o[0][2],n)}catch(e){c(o[0][3],e)}var n}function l(e){s("next",e)}function f(e){s("throw",e)}function c(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}},g=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,a){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,a,(t=e[n](t)).done,t.value)}))}}};function h(e){return p(this,arguments,(function*(){for(let t=0;t<u.length;t++){const n=u[t]+"-read-image",r=yield m(s(n,e.config.imageIOUrl));yield yield m(r)}}))}const y=async function(e,t){var n,r;if(e.mimeType&&l.has(e.mimeType)){const n=l.get(e.mimeType)+t;return await s(n,e.config.imageIOUrl)}const a=c(e.fileName);if(f.has(a)){const n=f.get(a)+t;return await s(n,e.config.imageIOUrl)}for(let t=0;t<u.length;++t){let t=0;try{for(var o,i=(n=void 0,g(h(e)));!(o=await i.next()).done;){const n=o.value;try{const{returnValue:t,outputs:r}=await(0,I.Z)(n,e.args,e.outputs,e.inputs);if(0===t)return n}catch(e){}t++}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&await r.call(i)}finally{if(n)throw n.error}}}throw Error(`Could not find IO for: ${e.fileName}`)},O=new Map([]),d=new Map([["vtk","VTKPolyDataMeshIO"],["VTK","VTKPolyDataMeshIO"],["byu","BYUMeshIO"],["BYU","BYUMeshIO"],["fsa","FreeSurferAsciiMeshIO"],["FSA","FreeSurferAsciiMeshIO"],["fsb","FreeSurferBinaryMeshIO"],["FSB","FreeSurferBinaryMeshIO"],["obj","OBJMeshIO"],["OBJ","OBJMeshIO"],["off","OFFMeshIO"],["OFF","OFFMeshIO"],["stl","STLMeshIO"],["STL","STLMeshIO"],["swc","SWCMeshIO"],["SWC","SWCMeshIO"],["iwm","WasmMeshIO"],["iwm.cbor","WasmMeshIO"],["iwm.cbor.zstd","WasmZstdMeshIO"]]),w=["BYUMeshIO","FreeSurferAsciiMeshIO","FreeSurferBinaryMeshIO","OBJMeshIO","OFFMeshIO","STLMeshIO","SWCMeshIO","VTKPolyDataMeshIO","WasmMeshIO","WasmZstdMeshIO"];var v=function(e){return this instanceof v?(this.v=e,this):new v(e)},b=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,a=n.apply(e,t||[]),o=[];return r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r;function i(e){a[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=a[e](t)).value instanceof v?Promise.resolve(n.value.v).then(l,f):c(o[0][2],n)}catch(e){c(o[0][3],e)}var n}function l(e){s("next",e)}function f(e){s("throw",e)}function c(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}},M=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,a){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,a,(t=e[n](t)).done,t.value)}))}}};function S(e){return b(this,arguments,(function*(){for(let t=0;t<w.length;t++){const n=w[t]+"-read-mesh",r=yield v(s(n,e.config.meshIOUrl));yield yield v(r)}}))}const P=async function(e,t){var n,r;if(e.mimeType&&O.has(e.mimeType)){const n=O.get(e.mimeType)+t;return await s(n,e.config.meshIOUrl)}const a=c(e.fileName);if(d.has(a)){const n=d.get(a)+t;return await s(n,e.config.meshIOUrl)}for(let t=0;t<w.length;++t){let t=0;try{for(var o,i=(n=void 0,M(S(e)));!(o=await i.next()).done;){const n=o.value;try{const{returnValue:t,outputs:r}=await(0,I.Z)(n,e.args,e.outputs,e.inputs);if(0===t)return n}catch(e){}t++}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&await r.call(i)}finally{if(n)throw n.error}}}throw Error(`Could not find IO for: ${e.fileName}`)};var F=n(4712),N=n(602),T=n(8155);r((async function(e){let t=null;if("runPipeline"===e.operation){const n=void 0===e.config[e.pipelineBaseUrl]?e.pipelineBaseUrl:e.config[e.pipelineBaseUrl];t=await s(e.pipelinePath,n)}else if("readImage"===e.operation)t=await y(e,"-read-image");else if("writeImage"===e.operation)t=await y(e,"-write-image");else if("readMesh"===e.operation)t=await P(e,"-read-mesh");else if("writeMesh"===e.operation)t=await P(e,"-write-mesh");else if("meshToPolyData"===e.operation)t=await s("mesh-to-polydata",e.config.meshIOUrl);else if("polyDataToMesh"===e.operation)t=await s("polydata-to-mesh",e.config.meshIOUrl);else if("readDICOMImageSeries"===e.operation)t=await s("read-image-dicom-file-series",e.config.imageIOUrl);else{if("readDICOMTags"!==e.operation)throw new Error("Unknown worker operation");t=await s("read-dicom-tags",e.config.imageIOUrl)}return async function(e,t,n,a){const o=(0,I.Z)(e,t,n,a),i=[];return o.outputs&&o.outputs.forEach((function(e){if(e.type===T.Z.BinaryStream||e.type===T.Z.BinaryFile){const t=e.data,n=(0,N.Z)(t);n&&i.push(n)}else if(e.type===T.Z.Image){const t=e.data;let n=(0,N.Z)(t.data);n&&i.push(n),n=(0,N.Z)(t.direction),n&&i.push(n)}else if(e.type===T.Z.Mesh){const t=function(e){const t=[];return null!=e.points&&t.push(e.points.buffer),null!=e.pointData&&t.push(e.pointData.buffer),null!=e.cells&&t.push(e.cells.buffer),null!=e.cellData&&t.push(e.cellData.buffer),t}(e.data);i.push(...t)}else if(e.type===T.Z.PolyData){const t=function(e){const t=[];return null!=e.points&&t.push(e.points.buffer),null!=e.vertices&&t.push(e.vertices.buffer),null!=e.lines&&t.push(e.lines.buffer),null!=e.polygons&&t.push(e.polygons.buffer),null!=e.triangleStrips&&t.push(e.triangleStrips.buffer),null!=e.pointData&&t.push(e.pointData.buffer),null!=e.cellData&&t.push(e.cellData.buffer),t}(e.data);i.push(...t)}else if(e.type===F.Z.Binary){const t=e.data,n=(0,N.Z)(t);n&&i.push(n)}else if(e.type===F.Z.Image){const t=e.data;let n=(0,N.Z)(t.data);n&&i.push(n),n=(0,N.Z)(t.direction),n&&i.push(n)}else if(e.type===F.Z.Mesh){const t=e.data;if(t.points){const e=(0,N.Z)(t.points);e&&i.push(e)}if(t.pointData){const e=(0,N.Z)(t.pointData);e&&i.push(e)}if(t.cells){const e=(0,N.Z)(t.cells);e&&i.push(e)}if(t.cellData){const e=(0,N.Z)(t.cellData);e&&i.push(e)}}})),new r.TransferableResponse(o,i)}(t,e.args,e.outputs,e.inputs)}))}},r={};function a(e){var t=r[e];if(void 0!==t)return t.exports;var o=r[e]={exports:{}};return n[e](o,o.exports,a),o.exports}return a.m=n,a.x=()=>{var e=a.O(void 0,[880],(()=>a(4236)));return a.O(e)},e=[],a.O=(t,n,r,o)=>{if(!n){var i=1/0;for(c=0;c<e.length;c++){for(var[n,r,o]=e[c],s=!0,l=0;l<n.length;l++)(!1&o||i>=o)&&Object.keys(a.O).every((e=>a.O[e](n[l])))?n.splice(l--,1):(s=!1,o<i&&(i=o));if(s){e.splice(c--,1);var f=r();void 0!==f&&(t=f)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[n,r,o]},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,n)=>(a.f[n](e,t),t)),[])),a.u=e=>e+".itkVtkViewerCDN.js",a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.p="https://cdn.jsdelivr.net/npm/",(()=>{var e={236:1};a.f.i=(t,n)=>{e[t]||importScripts(a.p+a.u(t))};var t=self.webpackChunkitkVtkViewer=self.webpackChunkitkVtkViewer||[],n=t.push.bind(t);t.push=t=>{var[r,o,i]=t;for(var s in o)a.o(o,s)&&(a.m[s]=o[s]);for(i&&i(a);r.length;)e[r.pop()]=1;n(t)}})(),t=a.x,a.x=()=>a.e(880).then(t),a.x()})()));